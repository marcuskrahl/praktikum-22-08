<!DOCTYPE html>
<html lang="de">



<head>
  <link rel="stylesheet" href="stylesheet.css"> <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glückskeks.mms</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>

</head>

<body>
  <nav>
    <ul>

      <li><a class="active" href="index.html">Home</a></li>
      <li><a href="#kaufen">Kaufen</a></li>
      <li><a href="#Selbstgestaltung">Selbstgestaltung</a></li>
      <li><a href="#Großbestellung">Großbestellung</a></li>
    </ul>
  </nav>
  <h1>
    Glückskeks.mss - Dein Anbieter für digitale Glückskekse
  </h1>
  <main>
    <h3>
      Täglich kannst du hier einen neuen Glückskeks mit einem neuen Spruch öffnen.
    </h3>

    <div class="Spruch_Keks">
      <img src="images/GK.jpg" alt="" id="myPic">
      <div class="main">
        <p id="result" class="hidden" style="font-family: 'Patrick Hand', cursive;"></p>
      </div>
      <img src="images/GK_rechts.png" id="GK_rechts" class="hidden"> <br>
    </div>

    <input type="button" value="Jetzt Glückskeks öffnen" onclick="tausch()" id="button">
    <button type="button" onclick="Kontostand()" id="Kontostand">Kontostand anzeigen</button>


    <!-- <button onclick="myFunction()" id="select" class="hidden">Spruch lesen</button> -->

    <p>
      Wenn du noch mehr Glückkekse digital öffnen willst, dann kaufe bei uns ein! Für jeden Keks, den du bei uns
      bestellst, kannst du kostenlos jeden Tag einen weiteren öffnen. <br> Trage hier ein, wie viele Kekse du bestellt
      hast:
    </p>
    <span id="addkeks">
      Trage hier deine Bestellnummer ein(sechsstellig):</p><input name="Kaufnummer" type="text" id="Kauf_Nummer" maxlength="3">
      <button type="button" onclick="KaufNummer()" id="Button1">Senden</button>
    </span>



    <section id="kaufen">
      <h3>
        Glückskekse kaufen
      </h3>
      <div id="smart-button-container">
        <div style="text-align: center;">
          <div style="margin-bottom: 1.25rem;">
            <p>Kaufe jetzt digitale Kekse - BETA (bisher ohne Funktion)</p>
            <select id="item-options"><option value="1 Keks" price="0.5">1 Keks - 0.5 USD</option><option value="2 Kekse" price="0.6">2 Kekse - 0.6 USD</option><option value="5 Kekse" price="1">5 Kekse - 1 USD</option><option value="15 Kekse" price="2">15 Kekse - 2 USD</option><option value="100 Kekse" price="10">100 Kekse - 10 USD</option></select>
            <select style="visibility: hidden" id="quantitySelect"></select>
          </div>
        <div id="paypal-button-container"></div>
        </div>
      </div>
      <script src="https://www.paypal.com/sdk/js?client-id=sb&enable-funding=venmo&currency=USD" data-sdk-integration-source="button-factory"></script>
      <script>
        function initPayPalButton() {
          var shipping = 0;
          var itemOptions = document.querySelector("#smart-button-container #item-options");
      var quantity = parseInt();
      var quantitySelect = document.querySelector("#smart-button-container #quantitySelect");
      if (!isNaN(quantity)) {
        quantitySelect.style.visibility = "visible";
      }
      var orderDescription = 'Kaufe jetzt digitale Kekse';
      if(orderDescription === '') {
        orderDescription = 'Item';
      }
      paypal.Buttons({
        style: {
          shape: 'rect',
          color: 'gold',
          layout: 'vertical',
          label: 'paypal',
          
        },
        createOrder: function(data, actions) {
          var selectedItemDescription = itemOptions.options[itemOptions.selectedIndex].value;
          var selectedItemPrice = parseFloat(itemOptions.options[itemOptions.selectedIndex].getAttribute("price"));
          var tax = (0 === 0 || false) ? 0 : (selectedItemPrice * (parseFloat(0)/100));
          if(quantitySelect.options.length > 0) {
            quantity = parseInt(quantitySelect.options[quantitySelect.selectedIndex].value);
          } else {
            quantity = 1;
          }
  
          tax *= quantity;
          tax = Math.round(tax * 100) / 100;
          var priceTotal = quantity * selectedItemPrice + parseFloat(shipping) + tax;
          priceTotal = Math.round(priceTotal * 100) / 100;
          var itemTotalValue = Math.round((selectedItemPrice * quantity) * 100) / 100;
  
          return actions.order.create({
            purchase_units: [{
              description: orderDescription,
              amount: {
                currency_code: 'USD',
                value: priceTotal,
                breakdown: {
                  item_total: {
                    currency_code: 'USD',
                    value: itemTotalValue,
                  },
                  shipping: {
                    currency_code: 'USD',
                    value: shipping,
                  },
                  tax_total: {
                    currency_code: 'USD',
                    value: tax,
                  }
                }
              },
              items: [{
                name: selectedItemDescription,
                unit_amount: {
                  currency_code: 'USD',
                  value: selectedItemPrice,
                },
                quantity: quantity
              }]
            }]
          });
        },
        onApprove: function(data, actions) {
          return actions.order.capture().then(function(orderData) {
            
            // Full available details
            console.log('Capture result', orderData, JSON.stringify(orderData, null, 2));
  
            // Show a success message within this page, e.g.
            const element = document.getElementById('paypal-button-container');
            element.innerHTML = '';
            element.innerHTML = '<h3>Thank you for your payment!</h3>';
  
            // Or go to another URL:  actions.redirect('thank_you.html');
  
          });
        },
        onError: function(err) {
          console.log(err);
        },
      }).render('#paypal-button-container');
    }
    initPayPalButton();
      </script>
    </section>

    <section id="Selbstgestaltung">
      <h3>
        Glückskekse Selbst Gestalten
      </h3>
    </section>



  





  </main>

</body>

</html>





<script>

















  let eingelösteBestellnummern = [];
  

  var Kekskonto = 1
  function KaufNummer() {
    let Kauf_Nummer = document.getElementById('Kauf_Nummer').value;
    console.log(eingelösteBestellnummern)
    let eingelöst = eingelösteBestellnummern.find(Nummer=>Nummer===Kauf_Nummer)

    if (eingelöst) {
      alert('Diese Nummer ist nicht gültig! Das liegt entweder daran, dass zu dem Code kein Kauf zugeordnet werden konnte oder der Code bereits abgelaufen ist bzw. benutzt wurde')
    

    

    } else {
      eingelösteBestellnummern.push(...[Kauf_Nummer])

      switch (parseInt(Kauf_Nummer.charAt(0))) {
        case 1:
          Kekskonto = Kekskonto + 1;
          alert('Erfolgreich 1 Keks hinzugefügt')
          break;
        case 2:
          Kekskonto = Kekskonto + 2
          alert('Erfolgreich 2 Kekse hinzugefügt')
          break;
        case 3:
          Kekskonto = Kekskonto + 3
          alert('Erfolgreich 3 Kekse hinzugefügt')
          break;
        case 4:
          Kekskonto = Kekskonto + 4
          alert('Erfolgreich 4 Kekse hinzugefügt')
          break;
        case 5:
          Kekskonto = Kekskonto + 5
          alert('Erfolgreich 5 Kekse hinzugefügt')
          break;
        case 6:
          Kekskonto = Kekskonto + 6;
          alert('Erfolgreich 6 Kekse hinzugefügt')
          break;
        case 7:
          Kekskonto = Kekskonto + 7;
          alert('Erfolgreich 7 Kekse hinzugefügt')
        case 8:
          Kekskonto = Kekskonto + 8;
          alert('Erfolgreich 8 Kekse hinzugefügt')
        case 9:
          Kekskonto = Kekskonto + 9;
          alert('Erfolgreich 9 Kekse hinzugefügt')
        default:
          alert('Du musst eine Nummer eingeben!');
      }
    }

      return Kekskonto;
    }
  







 
  

  function Kontostand() {
    alert('Dein aktueller Kontostand beträgt: ' + Kekskonto)
  }

  function Konto(Kekskonto) {
    document.getElementById('Konto').innerHTML = Kekskonto;
  }


  //  eingelösteBestellnummern.push 
  //  eingelösteBestellnummern.pop




  



  function myFunction() {



  }
  async function tausch() {
    document.getElementById("myPic").setAttribute("src", "images/Gk_links.png");
    document.getElementById("GK_rechts").classList.remove("hidden")
    console.log(Kekskonto)
    if (Kekskonto === 0) {
      alert('Aktuell hast du alle deine Kekse verbraucht. Wenn du noch mehr Kekse öffnen willst, kannst du dir im Onlineshop neue kaufen!')
    } else {
      Kekskonto = -1 + Kekskonto;
      console.log(Kekskonto)
    }
    document.getElementById("result").classList.remove("hidden")


    var text = [
      "Hier könnte Ihre Werbung stehen. ~ Unbekannt",
      "„Wer lächelt statt zu toben, ist immer der Stärkere.“ ~ japanische Weisheit",
      "„Gewohnheiten sind zuerst Spinnweben - dann Drähte.“ ~ Alte fernöstliche Weisheit",
      "„Betrachte den Fluss Deines Lebens und erkenne, wie viele Ströme in ihn münden, die Dich nähren und unterstützen.“ ~ Thich Nhat Hanh ",
      "„Der Mensch ist dazu geboren, großes zu leisten, wenn er versteht, sich selbst zu besiegen.“ ~ Bruce Lee"
    ];

    var response = await fetch('/test/')
    var auswahl = await response.text()
    document.getElementById("result").innerHTML = auswahl
    document.getElementById("select").classList.add("hidden")
    document.getElementByID("result").classList.add("Hintergrund")


  }

</script>